<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TicTacToe - Team 1</title>

    <style>
        .board {
            display: grid;
            grid-template-columns: 210px 210px 210px;
        }

        .cell {
            width: 200px;
            height: 200px;
            background-color: rgb(185, 184, 184);
            margin: 10px 10px 0 0;
            text-align: center;
            font-size: 160px;
            /* padding-top: 20px; */

        }

        .setToDisabled {
            pointer-events: none;
        }


        div {
            user-select: none;
        }
    </style>

    <!-- Kodingen i denne oppgaven er gjort felles -->

</head>

<body>
    <div id="app"></div>


    <script>
        //Model

        let divCell0 = "";
        let divCell1 = "";
        let divCell2 = "";
        let divCell3 = "";
        let divCell4 = "";
        let divCell5 = "";
        let divCell6 = "";
        let divCell7 = "";
        let divCell8 = "";
        let count = 0;
        let temp;
        var winMessage = '';
        let disabledDiv = '';


        const playerX = 'X';
        const playerO = 'O';




        //View
        showapp()
        function showapp() {
            document.getElementById('app').innerHTML = `
        <div class="board">
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('1',this)">${divCell0}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('2',this)">${divCell1}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('3',this)">${divCell2}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('4',this)">${divCell3}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('5',this)">${divCell4}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('6',this)">${divCell5}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('7',this)">${divCell6}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('8',this)">${divCell7}</div>
            <div class="cell  ${disabledDiv}"  onclick="changeDiv('9',this)">${divCell8}</div>
            

            <div class="winMessage">${winMessage}</div>
            <button onclick="uavgjort()"">Reset</button>
             
        </div>
        `;
        // <button onclick="showWinner()"">Check winner</button>
        }


        //Controller
        function showWinner() {
            if ((divCell0 == 'X' && divCell1 == 'X' && divCell2 == 'X') || (divCell0 == 'O' && divCell1 == 'O' && divCell2 == 'O')) {
                winMessage = `Du har tre ${divCell0} på rad toppraden!`;
                alert(winMessage);
                // window.location.reload();
                disabledDiv = 'setToDisabled';
            }
            else if ((divCell3 == 'X' && divCell4 == 'X' && divCell5 == 'X') || (divCell3 == 'O' && divCell4 == 'O' && divCell5 == 'O')) {
                winMessage = ` Du har tre ${divCell3} like på midtraden!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            else if ((divCell6 == 'X' && divCell7 == 'X' && divCell8 == 'X') || (divCell6 == 'O' && divCell7 == 'O' && divCell8 == 'O')) {
                winMessage = `Du har tre ${divCell6} like på bunnraden!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            else if ((divCell0 == 'X' && divCell3 == 'X' && divCell6 == 'X') || (divCell0 == 'O' && divCell3 == 'O' && divCell6 == 'O')) {
                winMessage = ` Du har tre ${divCell0} like venstre raden!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            else if ((divCell1 == 'X' && divCell4 == 'X' && divCell7 == 'X') || (divCell1 == 'O' && divCell4 == 'O' && divCell7 == 'O')) {
                winMessage = ` Du har tre ${divCell1} like på midtlinjen!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            else if ((divCell2 == 'X' && divCell5 == 'X' && divCell8 == 'X') || (divCell2 == 'O' && divCell5 == 'O' && divCel8 == 'O')) {
                winMessage = ` Du har tre ${divCell2} like på Høyrelinjen!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            else if ((divCell0 == 'X' && divCell4 == 'X' && divCell8 == 'X') || (divCell0 == 'O' && divCell4 == 'O' && divCell8 == 'O')) {
                winMessage = ` Du har tre ${divCell0} like på diagonalen!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            else if ((divCell2 == 'X' && divCell4 == 'X' && divCell6 == 'X') || (divCell2 == 'O' && divCell4 == 'O' && divCell6 == 'O')) {
                winMessage = ` Du har tre ${divCell2} like på diagonalen!`;
                alert(winMessage);
                disabledDiv = 'setToDisabled';
                // window.location.reload();
            }
            // else winMessage = "Ingen vinnere enda";
            showapp();

        }

        function uavgjort() {
            // alert("Uavgjort.");
            window.location.reload();
        }

        function ShowXO() {
            count = 1 - count;
            if (count == 1) return playerX;
            if (count == 0) return playerO;
        }
        function changeDiv(element, divInnhold) {
            // console.log(divInnhold.innerHTML);
            if (divInnhold.innerHTML == '') {
                temp = ShowXO();
                if (element == 1) {
                    divCell0 = temp;
                }
                if (element == 2) {
                    divCell1 = temp;
                }
                if (element == 3) {
                    divCell2 = temp;
                }
                if (element == 4) {
                    divCell3 = temp;
                }
                if (element == 5) {
                    divCell4 = temp;
                }
                if (element == 6) {
                    divCell5 = temp;
                }
                if (element == 7) {
                    divCell6 = temp;
                }
                if (element == 8) {
                    divCell7 = temp;
                }
                if (element == 9) {
                    divCell8 = temp;
                }
            }
            else alert('Ruten er allerede fylt ut');
            showapp();
            showWinner();
        }



 // else return console.log('feil');
         // function showChos() {
         //     if ((divCell0 && divCell1 && divCell2) === 'X') return console.log('funka');
         // }
    </script>
</body>

</html>